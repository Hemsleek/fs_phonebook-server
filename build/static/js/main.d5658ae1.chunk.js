(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),o=n.n(c),a=n(17),s=n.n(a),i=n(18),u=n(3),l=n(4);var d=function(e){var t=e.filtered,n=e.setFiltered;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:t,onChange:function(e){return n(e.target.value)}})]})};var b=function(e){var t=e.newName,n=e.newNumber,c=e.setNewNumber,o=e.setNewName,a=e.handleSubmit;return Object(r.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:function(e){return o(e.target.value)}})]}),Object(r.jsxs)("div",{children:["Phonebook: ",Object(r.jsx)("input",{value:n,onChange:function(e){return c(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{onClick:a,type:"submit",children:"add"})})]})};var j=function(e){var t=e.personsToShow,n=e.deletePerson;return Object(r.jsx)("div",{children:t.map((function(e,t){return Object(r.jsxs)("div",{style:{margin:"1rem 0"},children:[Object(r.jsxs)("span",{children:[e.name," - ",e.number]}),Object(r.jsx)("button",{style:{marginLeft:"10px",cursor:"pointer"},onClick:function(){return n(e)},children:"delete"})]},"person".concat(t))}))})},m=n(6),f=n.n(m),h="/api/persons/",O={addPerson:function(e){return f.a.post(h,e)},getAllPerson:function(){return f()(h)},deletePerson:function(e){return f.a.delete(h+e)},updatePerson:function(e,t){return f.a.put(h+e,t)}};n(42);var p=function(e){var t=e.message,n=t.messageText,c=t.messageColor;return null===n?null:Object(r.jsx)("div",{style:{color:c,border:"2px solid ".concat(c)},className:"Notification",children:n})};n(43);var x=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)(""),s=Object(l.a)(a,2),m=s[0],f=s[1],h=Object(c.useState)(""),x=Object(l.a)(h,2),v=x[0],g=x[1],w=Object(c.useState)([]),N=Object(l.a)(w,2),C=N[0],P=N[1],S=Object(c.useState)({messageText:null,messageColor:"green"}),T=Object(l.a)(S,2),k=T[0],y=T[1],A=function(){setTimeout((function(){y(Object(u.a)(Object(u.a)({},k),{},{messageText:null}))}),3e3)},L=v.trim()?C.filter((function(e){return e.name.toLowerCase().includes(v.toLowerCase())})):C;return Object(c.useEffect)((function(){O.getAllPerson().then((function(e){return P(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(p,{message:k}),Object(r.jsx)(d,{filtered:v,setFiltered:g}),Object(r.jsx)("h2",{children:"Add a New"}),Object(r.jsx)(b,{newName:n,newNumber:m,setNewNumber:f,setNewName:o,handleSubmit:function(){var e=C.find((function(e){return e.name.toLowerCase()===n.toLowerCase().trim()}));if(e){if(window.confirm("".concat(n," is already added to the phonebook,replace the old nimber with a new one"))){var t=Object(u.a)(Object(u.a)({},e),{},{number:m});O.updatePerson(e.id,t).then((function(n){P(C.map((function(n){return n.id===e.id?t:n}))),y(Object(u.a)(Object(u.a)({},k),{},{messageText:"Updated ".concat(t.name)})),A()})).catch((function(e){y({messageColor:"red",messageText:"information ".concat(t.name," of has already been removed from server")}),A()}))}return null}var r={name:n,number:m,id:C.length?Math.max.apply(Math,Object(i.a)(C.map((function(e){return e.id}))))+1:1};O.addPerson(r).then((function(e){P(C.concat(e.data)),y(Object(u.a)(Object(u.a)({},k),{},{messageText:"Added ".concat(r.name)})),o(""),f(""),A()})).catch((function(e){return console.log(e)}))}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(j,{deletePerson:function(e){var t=e.id;if(!window.confirm("Delete ".concat(e.name," ?")))return null;O.deletePerson(t).then((function(){P(C.filter((function(e){return e.id!==t}))),y(Object(u.a)(Object(u.a)({},k),{},{messageText:"Removed ".concat(e.name)})),A()})).catch((function(e){return console.log(e)}))},personsToShow:L})]})};n(44);s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(x,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.d5658ae1.chunk.js.map